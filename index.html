<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Authorize gmail account</title>
        <style>
            pre {
                background-color: #f4f4f4;
                padding: 10px;
                border: 2px solid #000;
                overflow-x: auto;
                white-space: pre-wrap;
            }
            #all_controls {
                border: 2px solid #000;
                padding: 0px 10px 10px 10px;
            }
            .button_bar {
                margin-top: 20px;
            }
            button {
                margin-right: 10px;
            }
        </style>
        <script type="module" src="index.js"></script>
    </head>
    <body>
        <h3 id="title_text">Gmail Authorization</h3>
        <p>
            A local <b>mailcapsule.io</b> email account <b>with a username beginning with 'gmail.'</b> may be associated with a gmail
            address.
            <br />
            To make this connection, select the desired local account username then use the 'Authorize with Google' button.<br />
            The resulting process will allow you to select a gmail account and authorize IMAP and SMTP connections.
        </p>
        <p>
            This action grants the <b>mailcapsule.io</b> servers permission to fetch incoming gmail and send outgoing gmail using a
            persistent authorization token.
        </p>
        <div id="all_controls">
            <div id="control_group">
                <h3 id="username_title">Select a local account:</h3>
                <div>
                    <select id="username_select"></select>
                </div>
                <div class="button_bar">
		    <label>Selected Account:</label>
		    <input id="selected_account" disabled="true"></input>
                    <button id="auth_button">Authorize with Google</button>
                    <button id="deauth_button">Remove Authorization</button>
                </div>
            </div>
            <div id="result_group">
                <h3>Result:</h3>
                <pre id="auth_result_text"></pre>
                <p></p>
                <div id="revoke_instructions">
                    To revoke an authorization open your google account settings page and choose "Account" -> "Third-party connections"
                    <p></p>
                </div>
		<button id="reauth_button">Authorize another account</button>
                </div>
            </div>
            <div id="reset_group">
		<button id="reset_button">Reset</button>
	    </div>
        </div>
    </body>
</html>
